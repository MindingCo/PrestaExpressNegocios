extends layouth

append jscss
    //- link(rel='stylesheet', href='/css/cliente.css')
    //- link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css')
append content    
    if user.id_tus == 1
        -var parseDate = function parseDate(date) { let dias = ["Lun.", "Mar.", "Mie.", "Jue.", "Vie.", "Sab.","Dom."]; let meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"]; return `${dias[date.getDay()]} ${date.getDate()}, ${meses[date.getMonth()]} ${date.getFullYear()}`; }
        -var LasteDate = function LasteDate(diario, faltante) { let hoy = new Date(); let diasfaltantes = Math.round(faltante/diario); diasfaltantes += Math.floor(diasfaltantes/7); hoy.setDate(hoy.getDate() + diasfaltantes); if (hoy.getDay() == 6) hoy.setDate(hoy.getDate()+1); return hoy; }
        //-     Datos del Prestamo
      if msg
          p= msg
      if !msg  
        .col.full.xl-half
            .card
                li.card-header.deep-orange.accent-2
                    .card-title
                        img.icon-big.margin.right(src="/img/icons/white/icons8_Credit_Card_50px.png", alt="")
                        h4.flight-card-title.inline= 'Préstamo '
                        span.ultra-small.m-0.ml-2.inline.white-text= `#${prestamo.id_pre}`
                        p.flight-card-date= parseDate(prestamo.fec_pre)
                .card-content-bg.white-text
                    .card-content
                        .row.flight-state-wrapper
                            .col.five_twelfths.ha-center
                                .flight-state
                                    p.ultra-small Monto diario
                                    h4.margin= `$${prestamo.mod_pre}`
                            .col.sixth.display-container
                                img.icon.flight-icon.display-topmiddle(src="/img/icons/white/icons8_Money_50px.png", alt="")
                            .col.five_twelfths.ha-center
                                .flight-state
                                    p.ultra-small Monto faltante
                                    h4.margin= `$${prestamo.mof_pre}`
                        .row
                            .col.half.ha-center
                                .flight-info
                                  p.small
                                      span.grey-text.text-lighten-4 Préstamo inicial :
                                  p.small.mt-2= `$${prestamo.moi_pre}`
                            .col.half.ha-center.flight-state-two
                                .flight-info
                                    p.small
                                        span.grey-text.text-lighten-4 Acabas el :
                                    p.small.mt-2= parseDate(LasteDate(prestamo.mod_pre, prestamo.mof_pre))
        //-     Historial de pagos
        .col.full.m-full
            ul.collection.z-depth-1
                li.collection-item.avatar.pt-3.pb-3
                    img.icon.circle(src="/img/icons/indigo/icons8_Graph_50px.png")
                    h6.collection-header.bold Pagos
                    p Pagos realizados por este préstamo
                for pago in pagos
                    li.collection-item
                        .row.mb-0
                            .col.five_twelfths
                                p.collections-title= parseDate(pago.fec_pag)
                                p.collections-content= `$${pago.mon_pag}`
                            .col.seven_twelfths
                                span.task-cat.blocked.grey-text.text-darken-4= pago.com_pag
    else if user.id_tus == 2
        .col.full
            .card.p-1
                #mapita(style="width: 90vw; height: 90vh; z-index: 0")
                p#zzz(style="visibility: hidden")= user.nom_usu  
        //- //-    Seccion de cliente (max 10)
        //- section.margin.beautyCard.floating.white
        //-     .container.margin-t
        //-         p.margin0.marginy 
        //-             img.icon.va-middle.margin-r(src="/img/icons/indigo/icons8_Stocks_50px.png", alt="")
        //-             b.deep-purple-text.text-darken-2 Pagos
        //-     .divider
        //-     .section.row
        //-         .data.inline.w.third
        //-             h6.va-middle.sub_title.ha-middle.grey-text.text-darken-1 Cliente
        //-         .data.inline.w.third
        //-             h6.va-middle.sub_title.ha-middle.grey-text.text-darken-1 Direccion de negocio
        //-         .data.inline.w.third
        //-             h6.va-middle.sub_title.ha-middle.grey-text.text-darken-1 Telefono
        //-     - var n = 0
        //-     while n < (clientes.length < 10 ? clientes.length : 10)
        //-         .section.row
        //-             .data.inline.w.third.row
        //-                 .w.sixth &nbsp;
        //-                 h4.va-middle.ha-middle.w.twothird
        //-                     b.light-blue-text.text-darken-3= clientes[n].nom_cli
        //-             .data.inline.w.third.row
        //-                 .w.sixth &nbsp;
        //-                 h5.va-middle.ha-middle.w.twothird
        //-                     b.light-blue-text.text-darken-3.blocked= clientes[n].din_cli
        //-             .data.inline.w.third.row
        //-                 .w.third &nbsp;
        //-                 h5.va-middle.ha-middle.w.third
        //-                     b.light-blue-text.text-darken-3= clientes[n++].tel_cli
        
    else if user.id_tus == 3
      blockquote
        h2= user.nom_ger
      .row
        .col.s4
        .col.s4
        .col.s4  
          input.right-align(placeholder='Filtrar asesor')
      br
      .divider
      .section
        table.responsive-table
          thead 
            tr  
              th Nombre del Asesor
              th Zona
              th
          tbody
            each asesor in asesores
              tr
                td= asesor.nom_ase
                td= asesor.nom_zon
                td 
                  a.btn(href="/gerente/asesor/"+asesor.id_ase) Más detalles
                  a.btn(href="/geolocalizacion/"+asesor.id_ase) Geolocalizar
              
      br
      a(href="/admin/registrar")
        p Ir a agregar
    else if user.id_tus == 4
        h3 Bienvenido Administrador
        -var parseDate = function parseDate(date) { let dias = ["Lun.", "Mar.", "Mie.", "Jue.", "Vie.", "Sab.","Dom."]; let meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"]; return `${dias[date.getDay()]} ${date.getDate()}, ${meses[date.getMonth()]} ${date.getFullYear()}`; }
        .col-md-4
          h4.text-center Ingresos por dia 
          canvas#myChart(style="width: 70%; height: 100%")
        
        for info in prestamos
          li.collection-item
              .row.mb-0
                  .col.five_twelfths  
                    //- p.collections-content= info.id_pre
                    //- p.collections-content= info.moi_pre
                    //- p.collections-content= info.mof_pre
                    //- p.collections-content= info.mod_pre
                    //- p.collections-content= parseDate(info.fec_pre)   
                    - var values = [info.mod_pre];
                    ul
                      each val in values
                        li#valu(style="visibility: hidden")= val
                      else
                        li There are no values
        script(src="/js/canva.js")    
            
    else 
        p Necesitas iniciar sesión
